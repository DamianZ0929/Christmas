<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>to铁蛋老师</title>
  <style>
    html,body{height:100%;margin:0;padding:0;background:#151522;overflow:hidden}
    body{display:flex;align-items:center;justify-content:center}
    svg{width:90%;height:90%;visibility:hidden}
    /* 文字 */
    .text-container{
      position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
      text-align:center;font:36px/1 Arial;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.8);
      z-index:1000
    }
    .text-line{opacity:0;margin:10px 0}
  </style>
</head>
<body>
  <svg class="mainSVG" viewBox="0 0 800 600">
    <defs>
      <!-- 粒子形状 -->
      <circle id="circ" r="1"/>
      <polygon id="star" points="4.55,0 5.95,2.85 9.1,3.3 6.82,5.52 7.36,8.65 4.55,7.17 1.74,8.65 2.27,5.52 0,3.3 3.14,2.85"/>
      <polygon id="cross" points="4,3.5 2.5,2 4,0.5 3.5,0 2,1.5 0.5,0 0,0.5 1.5,2 0,3.5 0.5,4 2,2.5 3.5,4"/>
      <path id="heart" d="M2.9,0C2.53,0,2.2,0.18,2,0.47C1.8,0.18,1.47,0,1.1,0C0.49,0,0,0.49,0,1.1 C0,2.6,1.56,4,2,4s2-1.4,2-2.9C4,0.49,3.51,0,2.9,0z"/>
      <!-- 星星发光 -->
      <radialGradient id="dotGrad" cx="0" cy="0" r="50">
        <stop offset="0" stop-color="#fff" stop-opacity="1"/>
        <stop offset="0.1" stop-color="#0867c7" stop-opacity="0.6"/>
        <stop offset="1" stop-color="#081029" stop-opacity="0"/>
      </radialGradient>
      <!-- 树主体 -->
      <mask id="treePathMask">
        <path class="treePathMask" fill="none" stroke="#fff" stroke-width="18"
              d="M252.9,447.9c0,0-30.8-21.6,33.9-44.7c64.7-23.1,46.2-37,33.9-41.6
                 c-12.3-4.6-59.3-11.6-42.4-28.5s114-52.4,81.7-66.2c-32.4-13.9-58.5-10.8-35.4-29.3
                 s66.2-101.7,70.9-115.6c4.4-13.2,16.9-18.5,24.7,0c7.7,18.5,44.7,100.1,67.8,115.6
                 c23.1,15.4-10.8,21.6-26.2,24.7c-15.4,3.1-20,33.9,33.9,49.3
                 c53.9,15.4,47.8,40.1,27.7,44.7c-20,4.6-63.2,4.6-27.7,32.4s98.6,21.6,61.6,60.1"/>
      </mask>
      <mask id="treeBottomMask">
        <path class="treeBottomMask" stroke="#fff" stroke-width="8"
              d="M207.5,484.1c0,0,58.5-43.1,211.1-3.1s191-16.9,191-16.9"/>
      </mask>
      <mask id="treePotMask">
        <path class="treePotMask" stroke="#fff" stroke-width="8"
              d="M374.3,502.5c0,0-4.6,20,7.7,29.3c12.3,9.2,40.1,7.7,50.8,0s10.8-23.1,10.8-29.3"/>
      </mask>
    </defs>

    <g class="whole">
      <g class="pContainer"></g>

      <!-- 树 -->
      <g class="tree" mask="url(#treePathMask)">
        <path fill="#cb9866"
              d="M252.95,447.85c0,0-30.81-21.57,33.89-44.68,64.7-23.11,46.22-37,33.89-41.6-12.33-4.62-59.32-11.56-42.37-28.5s114-52.38,81.66-66.25-32.32-13.91-35.43-29.32,66.25-101.71,70.87-115.55c4.41-13.24,16.95-18.49,24.65,0s44.68,100.14,67.79,115.55-10.78,21.57-26.19,24.65-20,33.89,33.89,49.3,47.76,40.06,27.73,44.68-63.17,4.62-27.73,32.35,98.6,21.57,61.63,60.09"/>
      </g>
      <!-- 树底 -->
      <path class="treeBottom" mask="url(#treeBottomMask)"
            d="M207.5,484.06c7.05-5.11,15.14-8.66,23.34-11.63a177.13,177.13,0,0,1,25.29-6.88,263.65,263.65,0,0,1,52.22-4.49h3.28l3.28.09,6.56.19,6.55.39c2.18.13,4.37.26,6.54.48,4.35.39,8.71.74,13,1.28l6.51.75,6.49.91c17.3,2.5,34.41,6,51.36,10.19l12.62,3.2c4.18,1,8.34,2.18,12.55,3.06,8.38,2,16.82,3.63,25.29,5.13a353.5,353.5,0,0,0,51.17,5.47c17.11.32,34.36-.66,51-4.7a118.55,118.55,0,0,0,24.21-8.47,84.82,84.82,0,0,0,11.11-6.49,47.55,47.55,0,0,0,9.69-8.53,48.1,48.1,0,0,1-9,9.45,85.1,85.1,0,0,1-10.81,7.45,116.56,116.56,0,0,1-24.23,10.24,165.66,165.66,0,0,1-25.79,5.35,232.1,232.1,0,0,1-26.27,1.71c-8.77,0-17.55-.24-26.26-1.09-2.18-.2-4.37-.35-6.54-.6l-6.52-.78c-4.36-.46-8.67-1.19-13-1.82-8.64-1.37-17.22-3.09-25.74-5-4.28-.87-8.5-2-12.75-3l-12.62-3.11q-25.06-6.37-50.58-10.47a426.37,426.37,0,0,0-51.3-5.3c-8.59-.42-17.19-.29-25.78,0a240.1,240.1,0,0,0-25.68,2.24,186.57,186.57,0,0,0-25.27,5.19c-4.15,1.16-8.26,2.49-12.28,4.05-2,.79-4,1.6-6,2.52A50.82,50.82,0,0,0,207.5,484.06Z"
            fill="#cb9866"/>
      <!-- 花盆 -->
      <path class="treePot" mask="url(#treePotMask)"
            d="M374.32,502.55a48.15,48.15,0,0,0,1.24,14.35c1.15,4.52,3.29,8.64,6.49,11.35a18.5,18.5,0,0,0,5.51,3.14,39.06,39.06,0,0,0,6.41,1.82,65.78,65.78,0,0,0,13.68,1.12,72.9,72.9,0,0,0,13.72-1.44,44.51,44.51,0,0,0,6.46-1.85,17.75,17.75,0,0,0,5.51-3.15,25.45,25.45,0,0,0,7.24-11.17,52,52,0,0,0,1.9-6.91c.48-2.37.83-4.8,1.18-7.25a55.16,55.16,0,0,1,.64,7.42,40.11,40.11,0,0,1-.52,7.56,31.23,31.23,0,0,1-2.19,7.5,24.37,24.37,0,0,1-4.46,6.79,25.16,25.16,0,0,1-6.61,5,39.72,39.72,0,0,1-7.4,3A58.55,58.55,0,0,1,407.75,542a55,55,0,0,1-15.47-1.9,36.65,36.65,0,0,1-7.46-3,25.3,25.3,0,0,1-6.6-5,19.63,19.63,0,0,1-2.5-3.34,21.72,21.72,0,0,1-1.79-3.67,27.66,27.66,0,0,1-1.65-7.7,38.16,38.16,0,0,1,2-14.87Z"
            fill="#cb9866"/>

      <!-- 星星 -->
      <g class="treeStar">
        <path fill="#FFFCF9"
              d="M408.12,83.45l-17.78,8.94,3.72-19.55-14-14.15,19.74-2.5,9.13-17.68,8.48,18L437,59.73l-14.5,13.63,3,19.67Z"/>
      </g>

      <!-- 顶部发光圆 -->
      <circle class="sparkle" fill="url(#dotGrad)" cx="0" cy="0" r="50"/>
    </g>
  </svg>

  <!-- 文字 -->
  <div class="text-container">
    <div class="text-line" id="text1">祝铁蛋老师</div>
    <div class="text-line" id="text2">圣诞快乐!!!</div>
  </div>

  <!-- 免费 GSAP 核心 + 插件 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Physics2DPlugin.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>

  <script>
    /* ---------- 基础变量 ---------- */
    const select = s => document.querySelector(s),
          selectAll = s => document.querySelectorAll(s);

    gsap.set("svg", {visibility: "visible"});

    /* ---------- 粒子系统 ---------- */
    const pContainer = select(".pContainer"),
          sparkle = select(".sparkle"),
          particleColorArray = ["#E8F6F8","#ACE8F8","#F6FBFE","#A2CBDC","#B74551","#5DBA72","#910B28","#446D39"],
          particleTypeArray = ["#star","#circ","#cross","#heart"],
          particlePool = [];
    let particleCount = 0,
        showParticle = true,
        numParticles = 201;

    /* 获取路径点 */
    function getPoints(pathSelector){
      const raw = MotionPathPlugin.getRawPath(select(pathSelector))[0], arr=[];
      for(let i=0;i<raw.length;i+=2) arr.push({x:raw[i],y:raw[i+1]});
      return arr;
    }
    const treePath = getPoints(".treePathMask"),
          treeBottomPath = getPoints(".treeBottomMask");

    /* 创建粒子 */
    for(let i=0;i<numParticles;i++){
      const shape = select(particleTypeArray[i%particleTypeArray.length]).cloneNode(true);
      select(".mainSVG").appendChild(shape);
      shape.setAttribute("fill", particleColorArray[i%particleColorArray.length]);
      shape.setAttribute("class", "particle");
      gsap.set(shape, {x:-100,y:-100,transformOrigin:"50% 50%"});
      particlePool.push(shape);
    }

    /* 播放单个粒子 */
    function playParticle(){
      if(!showParticle) return;
      const p = particlePool[particleCount];
      gsap.set(p, {
        x: gsap.getProperty(".pContainer","x"),
        y: gsap.getProperty(".pContainer","y"),
        scale: gsap.utils.random(0.5,3,0.001)
      });
      gsap.to(p, {
        duration: gsap.utils.random(0.61,6),
        physics2D: {
          velocity: gsap.utils.random(-23,23),
          angle: gsap.utils.random(-180,180),
          gravity: gsap.utils.random(-6,50)
        },
        scale: 0,
        rotation: gsap.utils.random(-123,360),
        ease: "power1",
        onStart: ()=> gsap.fromTo(p,{opacity:1},{duration:0.07, opacity:Math.random(), repeat:-1})
      });
      particleCount = (particleCount+1)%numParticles;
    }

    /* ---------- 主时间轴 ---------- */
    const mainTl = gsap.timeline({delay:0, repeat:0});

    /* 星星+发光球沿路径运动 */
    const starTl = gsap.timeline({onUpdate:playParticle});
    starTl
      .to(".pContainer, .sparkle", {
        duration: 6,
        motionPath: {path: ".treePathMask", autoRotate: false},
        ease: "linear"
      })
      .to(".pContainer, .sparkle", {
        duration: 1,
        onStart: ()=> showParticle=false,
        x: treeBottomPath[0].x,
        y: treeBottomPath[0].y
      })
      .to(".pContainer, .sparkle", {
        duration: 2,
        onStart: ()=> showParticle=true,
        motionPath: {path: ".treeBottomMask", autoRotate: false},
        ease: "linear"
      }, "-=0");

    /* 线条生长（免费版替代 drawSVG） */
    function growStroke(selector, dur){
      const path = select(selector);
      const len = path.getTotalLength();
      gsap.set(path, {strokeDasharray: len, strokeDashoffset: len});
      return gsap.to(path, {strokeDashoffset: 0, duration: dur, ease: "linear"});
    }

    /* 主动画序列 */
    mainTl
      .add(()=> growStroke(".treePathMask", 6), 0)
      .add(()=> growStroke(".treeBottomMask", 2), 6)
      .add(()=> growStroke(".treePotMask", 1), 7.5)
      .from(".treeStar", {
        duration: 3,
        scaleY: 0,
        scaleX: 0.15,
        transformOrigin: "50% 50%",
        ease: "elastic(1,0.5)"
      }, "-=4")
      .to(".sparkle", {
        duration: 3,
        opacity: 0,
        ease: "rough({strength:2, points:100, template:linear, taper:both, randomize:true, clamp:false})"
      }, "-=0")
      .to("#text1", {duration: 1.5, opacity: 1, y: 0, ease: "power2.out"}, "+=1")
      .to("#text2", {duration: 1.5, opacity: 1, y: 0, ease: "power2.out"}, "+=0.5");

    mainTl.add(starTl, 0);
    gsap.globalTimeline.timeScale(1.5);
  </script>
</body>
</html>